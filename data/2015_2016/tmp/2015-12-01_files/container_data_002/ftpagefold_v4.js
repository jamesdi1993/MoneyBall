(function(){var TEST_MODE=!1,LEGACY_EVENTS=!0,TICK_INTERVAL=100,DEV_MODE=!1,VIEWABLE_IMPRESSION=!1,TESTING=!0,ftPID;
(function(){function e(a,c){c=c||window;var b=this,d=c.navigator.userAgent,n=!1,f=!1,g=function(){f||(f=!0,n?b.flashFallbackLoad.ad=!0:b.initAdVisibility(a))};b.window=c;b.document=c.document;b.FF=/fox/.test(d);b.IE=/MSIE/.test(d);b.ios=/iP(ad|od|hone)/.test(d);b.safari=b.ios||/safari/i.test(d)&&!/chrome/i.test(d)&&!/android/i.test(d)&&!/edge/i.test(d)&&!/phantomjs/i.test(d);b.useFlashFallback=!1===a.useFlashFallback?!1:!b.safari;b.statBaseURL=a.statBaseURL;b.guid=a.guid||a.GUID;b.confID=a.confID;
b.iframe=c!==c.top;b.xdom=!1;if(b.iframe)try{c.parent.document.getElementsByTagName("head")}catch(h){b.xdom=!0}b.viewableConversion=a.viewableConversion;b.api=a.api&&!(a.api.bridge===a.api.fallbackAPI||a.api._BRIDGE===a.api.fallbackAPI);b.impressionTypes={viewable:"202",undetectable:"270",rendered:"271"};b.replaceMacros=function(b){return a.replaceMacros(b)};b.viewableImpressionURL=b.viewableConversion?a.viewableImpressionURL:"";b.width=b.currentWidth=parseInt(a.width,10);b.height=b.currentHeight=
parseInt(a.height,10);b.viewableImpressionThreshold=242500<=b.width*b.height?.6*a.viewableImpressionThreshold:a.viewableImpressionThreshold;b.viewableImpressionTime=0;b.apiListenersAdded=!1;b.viewableImpressionMAX=a.viewableImpressionTime;b.customDefinition=a.customDefinition;b.pixelModifiers=b.getPixelModifiers(b.viewableImpressionThreshold);b.visibleCount=0;b.visibleFired=!1;b.fired310=!1;b.safeFrame=c.$sf&&c.$sf.ext;b.target=b.xdom?c.document.getElementById(a.adId):c.parent.document.getElementById(a.adId)||
c.frameElement;b.initialVisibility=b.visibility.HIDDEN;b.lastVisibility=b.initialVisibility;b.currentStep=0;b.lastStep=(new Date).getTime();b.lastTick=(new Date).getTime();b.backgroundTimeSinceLastStep=0;b.backgroundTimeSinceLastTick=0;b.timeSentToBackground=0;b.secure=a.secure;b.firedImpressions={};b.viewableImpression=!1;b.undetectableImpression=!1;b.previousVisibility=0;b.currentStepInfo={visible:0,partial:0,hidden:0,undetectable:0};b.active=!0;b.dispatchEvent=function(b,c){a.dispatchEvent(b,c)};
a.firedRenderedImpression&&(b.firedImpressions[b.impressionTypes.rendered]=!0);b.ios&&this.listen(c,"scroll",function(){e.prototype.lastScroll=Date.now()});a.fver&&a.minflashversion?this.flash=!!a.fver():(d=!1,this.IE||"undefined"!=typeof c.navigator.plugins["Shockwave Flash"]&&(d=!!parseFloat(c.navigator.plugins["Shockwave Flash"].description.substring(15))),this.flash=d);"no"===a.pageVisible||b.safari||b.fireImpression(b.impressionTypes.rendered);b.xdom&&(b.safeFrame?b.detect=b.safeFrameDetect:
"undefined"!==typeof c.IntersectionObserver?(b.ioInitialise(),b.detect=b.ioDetect):"undefined"!==typeof c.mozInnerScreenY?(b.detectOriginal=b.detect,b.detect=b.ffDetect):8<=c.document.documentMode?b.detect=b.ieXDomDetect:!b.flash||b.FF||!b.useFlashFallback||c.document.documentMode||b.safari?(b.undetectableImpression=!0,b.fireStat(this.event.AD_UNDETECTABLE),b.viewableConversion&&(b.fireImpression(b.impressionTypes.undetectable),"no"===a.pageVisible&&b.safari||b.fireImpression(b.impressionTypes.rendered)),
a.addEventListener("visibilitychange",function(a){"no"===a||b.safari||b.fireImpression(b.impressionTypes.rendered)}),b.dispatchEvent("advisibility",!1)):(b.flashFallbackInfo={},b.flashControlPixelInfo=0,n=!0,b.flashFallbackLoad={ad:!1},b.pointArray=[],b.pixelReferences=[],b.flashControlPixel={id:"99",left:"-10000",top:"-1"},c.ftPagefoldFlashListener=function(c){var d=c.split("-");c=d[0];d=parseInt(d[1],10);b.flashCheck(c,d,a)},b.detect=b.flashDetect,b.drawFlash(a.pID)));a.addEventListener("adonpage",
g);a.addEventListener("backup",g)}e.prototype.event={AD_STARTS_VISIBLE:"301",AD_STARTS_PARTIAL_VISIBLE:"302",AD_MOVES_PARTIAL_TO_VISIBLE:"303",AD_STARTS_NOT_VISIBLE:"304",AD_MOVES_NOT_VISIBLE_TO_PARTIAL:"305",AD_MOVES_NOT_VISIBLE_TO_VISIBLE:"306",AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE:"307",AD_UNDETECTABLE:"308",AD_VISIBLE_TIME:"310",AD_PARTIALLY_VISIBLE_TIME:"311",AD_INVISIBLE_TIME:"312"};e.prototype.visibility={VISIBLE:2,PARTIAL:1,HIDDEN:0};e.prototype.lastScroll=0;e.prototype.INTERVAL_ARRAY=
[50,175,300,600,1200,3E3];e.prototype.initAdVisibility=function(a,c,b){c=c||this.document||document;b=b||this.window||window;var d=this;d.target=d.target||(d.xdom?c.getElementById(a.adId):b.parent.document.getElementById(a.adId)||b.frameElement);c=this.detect();b=this.event.AD_STARTS_NOT_VISIBLE;1!==c||d.customDefinition?0<c&&(b=this.event.AD_STARTS_PARTIAL_VISIBLE):b=this.event.AD_STARTS_VISIBLE;this.fireStat(b);this.lastVisibility=this.initialVisibility=this.getReadableVisibility(c);a.api&&"loading"===
a.api.getState()?a.api.addEventListener("ready",function(){d.addListeners(a)}):this.addListeners(a)};e.prototype.pageFoldRepeater=function(){var a=this,c=(new Date).getTime(),b=c-this.lastStep-this.backgroundTimeSinceLastStep,d=c-this.lastTick-this.backgroundTimeSinceLastTick,e=this.detect(),f=this.getReadableVisibility(e);a.ios&&250<d&&(c-this.lastScroll<d?e=Math.min(this.previousVisibility,e):(this.viewableImpressionTime=0,a.backgroundTimeSinceLastStep+=Math.max(0,c-this.lastTick),a.backgroundTimeSinceLastTick+=
Math.max(0,c-this.lastTick),b=c-this.lastStep-this.backgroundTimeSinceLastStep,d=c-this.lastTick-this.backgroundTimeSinceLastTick));a.active&&(a.safeFrame||a.target.parentNode)&&(this.dispatchEvent("advisibility",100*e),LEGACY_EVENTS&&(this.undetectableImpression?this.currentStepInfo.undetectable+=d:1==e?this.currentStepInfo.visible+=d:0<e?this.currentStepInfo.partial+=d:this.currentStepInfo.hidden+=d,this.customDefinition&&(f===this.visibility.VISIBLE?this.visibleCount+=d:this.visibleCount<this.viewableImpressionMAX&&
(this.visibleCount=0),!this.visibleFired&&this.visibleCount>=this.viewableImpressionMAX&&(this.initialVisibility===this.visibility.PARTIAL?this.fireStat(this.event.AD_MOVES_PARTIAL_TO_VISIBLE):this.fireStat(this.event.AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE),this.visibleFired=!0)),f>this.lastVisibility&&this.updateVisibility(f),this.currentStep<this.INTERVAL_ARRAY.length&&this.formatTime(b)>=this.INTERVAL_ARRAY[this.currentStep]&&(this.fire310(),this.lastStep=c,this.backgroundTimeSinceLastStep=
0,this.currentStep++)),a.viewableConversion&&!this.viewableImpression&&this.viewableImpressionURL&&(this.viewableImpressionTime=e>=this.viewableImpressionThreshold?this.viewableImpressionTime+d:0,this.viewableImpressionTime>=this.viewableImpressionMAX&&((this.window||window).viewableImpFired=!0,this.fireImpression(this.impressionTypes.viewable))),this.lastTick=c,this.backgroundTimeSinceLastTick=0,this.previousVisibility=e);(a.safeFrame||a.target.parentNode)&&(!a.api||a.api&&(a.viewableConversion&&
!a.viewableImpression||!a.viewableConversion&&!a.fired310))&&a.active&&setTimeout(function(){a.pageFoldRepeater()},TICK_INTERVAL)};e.prototype.pageVisible=function(a){return"yes"===a||"no"!==a&&(!0===this.xdom||!0===this.ios)};e.prototype.log=function(a){var c=this.window||window;DEV_MODE&&c.console&&c.console.log&&c.console.log(a)};e.prototype.error=function(a){if(DEV_MODE)throw Error(a);};e.prototype.listen=function(a,c,b){a.attachEvent?a.attachEvent("on"+c,b):a.addEventListener(c,b,!1)};e.prototype.removeListener=
function(a,c,b){a.detachEvent?a.detachEvent("on"+c,b):a.removeEventListener(c,b,!1)};e.prototype.addListeners=function(a){var c=this;c.timeSentToBackground=c.pageVisible(a.pageVisible)?0:(new Date).getTime();c.pageVisible(a.pageVisible)&&c.pageFoldRepeater();a.addEventListener("visibilitychange",function(a){c.active=c.pageVisible(a);c.active?(c.backgroundTimeSinceLastStep+=c.timeSentToBackground?Math.max(0,(new Date).getTime()-c.timeSentToBackground):0,c.backgroundTimeSinceLastTick+=c.timeSentToBackground?
Math.max(0,(new Date).getTime()-c.timeSentToBackground):0):(c.timeSentToBackground=(new Date).getTime(),c.viewableImpressionTime=0);"no"===a||c.safari||c.fireImpression(c.impressionTypes.rendered);c.pageFoldRepeater()})};e.prototype.updateVisibility=function(a){var c;this.lastVisibility===this.visibility.HIDDEN?a===this.visibility.PARTIAL?c=this.event.AD_MOVES_NOT_VISIBLE_TO_PARTIAL:a===this.visibility.VISIBLE&&(c=this.event.AD_MOVES_NOT_VISIBLE_TO_VISIBLE):this.lastVisibility!==this.visibility.PARTIAL||
a!==this.visibility.VISIBLE||this.customDefinition||(c=this.event.AD_MOVES_PARTIAL_TO_VISIBLE,this.initialVisibility===this.visibility.HIDDEN&&(c=this.event.AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE));this.lastVisibility=a;"undefined"!==typeof c&&this.fireStat(c)};e.prototype.getReadableVisibility=function(a){var c=this.visibility.HIDDEN;this.customDefinition&&a>=this.viewableImpressionThreshold?c=this.visibility.VISIBLE:1===a?c=this.visibility.VISIBLE:0<a&&(c=this.visibility.PARTIAL);return c};
e.prototype.fractionOf=function(a,c){return Math.max(Math.floor(a/c*100)/100,0)};e.prototype.formatTime=function(a){return Math.max(0,Math.ceil(a/100))};e.prototype.detect=function(){var a=this.getAdPos(this.target),c=this.getWindowDetails();return this.compare(a,c)};e.prototype.getClipping=function(a,c,b){a=(a=/swf/i.test(a.id)&&/ftin/i.test(a.parentNode.id)&&a.parentNode.style.clip.replace(/^.*\(|px|\)/g,""))?a.split(" "):[0,c,b,0];return{top:parseInt(a[0],10),left:parseInt(a[3],10),right:parseInt(a[1],
10),bottom:parseInt(a[2],10)}};e.prototype.getAdSize=function(a){var c=a.getBoundingClientRect();a=this.getClipping(a,c.right-c.left,c.bottom-c.top);return{top:c.top+a.top,left:c.left+a.left,right:a.right+c.left,bottom:a.bottom+c.top}};e.prototype.getAdPos=function(a,c){c=c||this.window||window;var b=this.getAdSize(a),d=this.xdom?c.document.documentElement.getBoundingClientRect():c.parent.document.documentElement.getBoundingClientRect(),e=this.getWindowDetails(),f=e.scrollLeft&&d.left||0,d=e.scrollTop&&
d.top||0;return c.attachEvent?{x:b.left+e.scrollLeft,y:b.top+e.scrollTop,width:b.right-b.left,height:b.bottom-b.top}:{x:b.left-f,y:b.top-d,width:b.right-b.left,height:b.bottom-b.top}};e.prototype.getWindowDetails=function(a){a=a||this.window||window;var c={scrollLeft:0,scrollTop:0,height:0,width:0};a=this.xdom?a:a.parent;a.innerWidth?(c.width=a.innerWidth,c.height=a.innerHeight,c.scrollLeft=a.pageXOffset,c.scrollTop=a.pageYOffset):a.document.documentElement&&a.document.documentElement.clientHeight?
(c.width=a.document.documentElement.clientWidth,c.height=a.document.documentElement.clientHeight,c.scrollLeft=a.document.documentElement.scrollLeft,c.scrollTop=a.document.documentElement.scrollTop):a.document.body&&(c.width=a.document.body.clientWidth,c.height=a.document.body.clientHeight,c.scrollLeft=a.document.body.scrollLeft,c.scrollTop=a.document.body.scrollTop);return c};e.prototype.compare=function(a,c){var b=c.scrollLeft,d=c.scrollLeft+c.width,e=c.scrollTop,f=c.scrollTop+c.height,g=a.x,h=a.x+
a.width,k=a.y,l=a.y+a.height,p=0,m;a:switch(!0){case e>l:case b>h:case d<g:case f<k:m=!0;break a;default:m=!1}m||(p=(Math.min(d,h)-Math.max(b,g))*(Math.min(f,l)-Math.max(e,k)));return Math.floor(p/((h-g)*(l-k))*100)/100};window.ftPageFold_v4=function(a){!0!==a.breakingOut&&new e(a,window)};e.prototype.ffDetect=function(){var a=this.ffGetAdPos(),c=this.ffGetWindowDetails();return Math.min(this.detectOriginal(),this.compare(a,c))};e.prototype.ffGetAdPos=function(a){a=a||this.window||window;var c=this.getAdSize(this.target);
return{x:a.mozInnerScreenX+c.left,y:a.mozInnerScreenY+c.top,width:c.right-c.left,height:c.bottom-c.top}};e.prototype.ffGetWindowDetails=function(a){a=a||this.window||window;return{scrollLeft:a.screenX,scrollTop:a.screenY+98,height:a.outerHeight-71,width:a.outerWidth}};e.prototype.flashDetect=function(){var a=[],c;for(c in this.flashFallbackInfo)this.flashFallbackInfo[c]<.8*this.flashControlPixelInfo&&a.push(c);a=this.visiblePercentageFromPixelSample(a);this.pointArray=this.checkFlashPixelPositioning(this.getPointCheckArray());
return a};e.prototype.checkFlashPixelPositioning=function(a){for(var c=this.pointArray,b=a.length;b--;)a[b].top!==c[b].top&&(this.pixelReferences[b].style.top=a[b].top+"px"),a[b].left!==c[b].left&&(this.pixelReferences[b].style.left=a[b].left+"px");return a};e.prototype.flashCheck=function(a,c,b,d){d=d||this.document||document;var e=0;"99"===a?this.flashControlPixelInfo=c:this.flashFallbackInfo[a]=c;this.flashFallbackLoad[a]=!0;for(var f in this.flashFallbackLoad)this.flashFallbackLoad[f]||e++;if(0===
e&&!this.flashFallbackLoad.preventRepeat){if(this.pixelReferences[0])a=this.pixelReferences;else{a=d.getElementsByClassName(".ftFlashPixel"+b.pID);c=[];for(d=a.length;d--;)"99"!==a[d].id.replace("id","")&&(c[a[d].id.replace("id","")]=a[d]);a=c}this.pixelReferences=a;this.initAdVisibility(b);this.flashFallbackLoad.preventRepeat=!0}};e.prototype.drawFlash=function(a,c){function b(){c.body&&!e&&(d.removeListener(c,"readystatechange",b),d.pointArray=d.getPointCheckArray(),e=!0,d.processPixelList(a))}
c=c||this.document||document;var d=this,e=!1;c.body?(d.pointArray=d.getPointCheckArray(),d.processPixelList(a)):d.listen(c,"readystatechange",b)};e.prototype.outputFlashPixel=function(a,c,b){b=b||this.document||document;var d='<div id="id@ID@" class="ftFlashPixel'+c+'" style="@STYLE@">@FLASH@</div>';c="position: absolute; top: "+a.top+"px;";var e=this.getFlash(a.id);c+=" width: "+this.FLASH_OPTIONS().width+"px;";c+=" height: "+this.FLASH_OPTIONS().height+"px;";c+=" left: "+a.left+"px; z-index: -1;";
this.IE?(b=d.replace("@STYLE@",c).replace("@FLASH@",e).replace("@ID@",a.id),this.target.parentNode.insertAdjacentHTML("beforeend",b)):(b=b.createElement("div"),b.style.cssText=c,b.innerHTML=e,this.target.parentNode.appendChild(b),"99"!==a.id&&(this.pixelReferences[a.id]=b))};e.prototype.processPixelList=function(a){var c=this.pointArray;this.outputFlashPixel(this.flashControlPixel,a);this.flashFallbackLoad[this.flashControlPixel.id]=!1;for(var b=0,d=c.length;b<d;b++)this.flashFallbackLoad[c[b].id]=
!1,this.outputFlashPixel(c[b],a)};e.prototype.getFlash=function(a){var c=this.FLASH_OPTIONS(),b=c.name+a,d;d="<OBJECT "+(this.IE?'classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'data="'+c.path+'" type="application/x-shockwave-flash"');d=d+(' ID="'+b+'" name="'+b+'"')+(' width="'+c.width+'" height="'+c.height+'" style="float:left;">');d+='<PARAM NAME=movie VALUE="'+c.path+'"/>';d=d+('<PARAM NAME=FlashVars VALUE="identifier='+a+'"/>')+'<PARAM NAME=quality VALUE="autohigh"/>';d+='<PARAM NAME=wmode VALUE="'+
c.wmode+'"/>';d+='<PARAM NAME="allowScriptAccess" value="always"/>';d+='<PARAM NAME="allowFullScreen" value="true"/>';return d+="</OBJECT>"};e.prototype.FLASH_OPTIONS=function(){return{path:(this.secure?"https":"http")+"://cdn.flashtalking.com/pageFold/pagefold.swf",name:"ftPF",width:1,height:2,wmode:"transparent"}};e.prototype.ieXDomDetect=function(a){function c(a,b){return 1>b?0:b<a?.1:b<e?f:1}a=0;var b=this.getPointCheckArray(!0),d=0,e=.5===this.viewableImpressionThreshold?9:12,f=this.viewableImpressionThreshold,
g;for(g in b)a+=document.elementFromPoint(b[g].left,b[g].top)?1:0;return d=.5===f?c(5,a):.5<f?c(8,a):.39<f?c(6,a):c(4,a)};e.prototype.ioInitialise=function(){var a=this,c=new window.IntersectionObserver(function(b,c){a.ioIntersectionRatio=b[0].intersectionRatio},{threshold:[1,this.viewableImpressionThreshold,0]});this.ioIntersectionRatio=0;c.observe(this.target)};e.prototype.ioDetect=function(){return this.ioIntersectionRatio};e.prototype.fire310=function(){var a=[this.formatTime(this.currentStepInfo.visible)];
a.push(this.formatTime(this.currentStepInfo.partial));a.push(this.formatTime(this.currentStepInfo.hidden));a.push(this.formatTime(this.currentStepInfo.undetectable));this.fireStat("310",a.join("x"));this.currentStepInfo.visible=0;this.currentStepInfo.partial=0;this.currentStepInfo.hidden=0;this.currentStepInfo.undetectable=0;this.fired310=!0};e.prototype.fireImpression=function(a){!this.firedImpressions[a]&&this.viewableConversion&&((new Image).src=this.replaceMacros(this.viewableImpressionURL.replace(";271;",
";"+a+";")),this.firedImpressions[a]=!0,a===this.impressionTypes.undetectable&&(this.viewableImpressionFired=!0))};e.prototype.fireStat=function(a,c){var b=[""+this.statBaseURL+this.confID];b.push(a);b.push("0");b.push(this.guid);b.push(this.random());c&&b.push(c);this.statBaseURL&&((new Image).src=b.join("-"))};e.prototype.random=function(a){return~~(Math.random()*(a||1E9))};e.prototype.getPixelModifiers=function(a){var c=Math.sqrt(a);return.5===a?[0,.2,.4,.5,.6,.8,1]:[0,1-c,1-a,.5,a,c,1].sort()};
e.prototype.getPointCheckArray=function(a){var c=this.getAdSize(this.target),b=this.getClipping(this.target,c.right-c.left,c.bottom-c.top),d=b.left,e=b.top,f=this.currentWidth=c.right-c.left,g=this.currentHeight=c.bottom-c.top,b=this.pixelModifiers.map(function(a){return f*a}),h=this.pixelModifiers.map(function(a){return g*a}),b=[{id:"0",left:b[0],top:h[1]},{id:"1",left:b[0],top:h[5]},{id:"2",left:b[1],top:h[0]},{id:"3",left:b[1],top:h[6]},{id:"4",left:b[2],top:h[2]},{id:"5",left:b[2],top:h[4]},{id:"6",
left:b[3],top:h[3]},{id:"7",left:b[4],top:h[2]},{id:"8",left:b[4],top:h[4]},{id:"9",left:b[5],top:h[0]},{id:"10",left:b[5],top:h[6]},{id:"11",left:b[6],top:h[1]},{id:"12",left:b[6],top:h[5]}];return b=a?b.map(function(a){a.left+=c.left;a.top+=c.top;return a}):b.map(function(a){a.left+=d;a.top+=e;return a})};e.prototype.visiblePercentageFromPixelSample=function(a){var c=this.pointArray,b=0,d=0,e=this.currentWidth,f=this.currentHeight,g=a.length;if(!g)return 0;if(3>g)return.01;for(;g--;)b=Math.max(b,
c[parseInt(a[g],10)].left),e=Math.min(e,c[parseInt(a[g],10)].left),d=Math.max(d,c[parseInt(a[g],10)].top),f=Math.min(f,c[parseInt(a[g],10)].top);return Math.floor((b-e)*(d-f)/(this.currentWidth*this.currentHeight)*100)/100};e.prototype.safeFrameDetect=function(){return this.safeFrame.inViewPercentage()/100}})();}());
